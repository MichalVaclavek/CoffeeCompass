<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
      <div th:replace="fragments/header :: header-css"/>
</head>
<!-- Stránka pro vytváření nebo editaci CoffeeSitu -->
<body>

	<div th:replace="fragments/header :: header"/>
	
	<div class="w3-display-container w3-row">
	<div class="w3-display-topmiddle w3-margin w3-card-4 w3-half">

      <form th:object="${coffeeSite}" action="#" th:action="@{/createModifySite}" method="post" class="w3-container w3-round-large w3-light-gray">
        <input th:type="hidden" name="id" th:field="${coffeeSite.id}" />
        <input th:type="hidden" name="originalUserName" th:field="${coffeeSite.originalUserName}" />
        <input th:type="hidden" name="recordStatus" th:field="${coffeeSite.recordStatus}" />
        
        <div class="w3-light-grey w3-margin-bottom w3-center">
     	   <h2  th:if="${coffeeSite.id} != 0" th:text="#{site.modify-site.label}" class="w3-center">Modify</h2>
     	   <h2  th:if="${coffeeSite.id} == 0" th:text="#{site.create-new-site.label}" class="w3-center">Create label</h2>
     	</div>
     	
     	<div th:if="${param.success}" class="w3-gray w3-display-container w3-round w3-panel">
	          <span onclick="this.parentElement.style.display='none'"
	  		  		class="w3-button w3-gray w3-large w3-display-topright">&times;</span>
	  		   <p th:text="#{app.site.modified.success}" class="w3-container" >
	  		   </p>
	    </div>
     
        <div class="w3-container w3-border">
          
           <div class="w3-margin-top">
              <label th:text="#{site.siteName}" for="siteName" class="w3-cell-bottom">Site name</label> *
              	  <div th:classappend="${#fields.hasErrors('siteName')} ? 'has-error' : ''">
	              <input id="siteName"
	                     class="w3-input w3-border w3-round"
	                     th:field="*{siteName}"
	                     th:placeholder="#{site.name.create.placeholder}"/>
	              </div>
	              <p class="error-message"
	                 th:each="error: ${#fields.errors('siteName')}"
	                 th:text="${error}">Validation error</p>
           </div>
          
           <div>
              <label for="dodavatelPodnik.nameOfCompany">
                <span th:text="#{site.supplier}">Supplier</span>
              </label>
              <i><label for="dodavatelPodnik.nameOfCompany.additionalinfo">
                <span th:text="#{site.supplier.additionalinfo}" class="w3-text-gray w3-small">Supplier</span>
              </label></i>
              <div th:classappend="${#fields.hasErrors('dodavatelPodnik.nameOfCompany')} ? 'has-error' : ''">
                 <input type="text" 
                        th:field="*{dodavatelPodnik.nameOfCompany}"
                        class="w3-input w3-border w3-round" />
              </div>
              <p class="error-message"
	             th:each="error: ${#fields.errors('dodavatelPodnik.nameOfCompany')}"
	             th:text="${error}">Validation error</p>
           </div>
           
           <!--  
           <div class="w3-cell-row"> 
          
	          
	          <div class="w3-container w3-cell">
	            <label for="numOfCoffeeAutomatyVedle">
	              <span th:text="#{site.numOfCoffeeMachines}">Number of coffee machines</span>
	            </label>
	            <div th:classappend="${#fields.hasErrors('numOfCoffeeAutomatyVedleSebe')} ? 'has-error' : ''">
	            	<input type="number"
	            	       th:field="*{numOfCoffeeAutomatyVedleSebe}"
	            	       class="w3-input w3-border w3-round"/>
	            </div>
	            <p class="error-message"
                    th:each="error: ${#fields.errors('numOfCoffeeAutomatyVedleSebe')}"
	                th:text="${error}">Validation error</p>
	          </div>
          
          </div>
          -->
          
          <div class="w3-cell-row">
	          <div class="w3-container w3-cell">
	             <label for="mesto">
	               <span th:text="#{site.city}">City</span>
	             </label>
	             <div th:classappend="${#fields.hasErrors('mesto')} ? 'has-error' : ''">
	            	<input type="text"
	            	       th:field="*{mesto}"
	            	       class="w3-input w3-border w3-round"/>
	             </div>
                 <p class="error-message"
                    th:each="error: ${#fields.errors('mesto')}"
	                th:text="${error}">Validation error</p>
	          </div>
	          
	          <div class="w3-container w3-cell">
	             <label for="uliceCP">
	               <span th:text="#{site.street}">Street</span>
	             </label>
	             <div th:classappend="${#fields.hasErrors('uliceCP')} ? 'has-error' : ''">
	            	<input type="text"
	            	       th:field="*{uliceCP}"
	            	       class="w3-input w3-border w3-round"/>
	             </div>
	             <p class="error-message"
	                th:each="error: ${#fields.errors('uliceCP')}"
	                th:text="${error}">Validation error</p>
	          </div>
          </div>
          
          <div class="w3-cell-row">
	          
	          <div class="w3-container w3-cell">
	             <label for="zemSirka">
	                <span th:text="#{site.latitude}">Latitude</span> *
	             </label>
	             <div th:classappend="${#fields.hasErrors('zemSirka')} ? 'has-error' : ''">
	            	<input type="number" step="any"
	            	       th:field="*{zemSirka}" 
	            	       class="w3-input w3-border w3-round"
	            	       th:placeholder="#{site.create.latitude.placeholder}"/>
	             </div>
	             <p class="error-message"
	               	th:each="error: ${#fields.errors('zemSirka')}"
	               	th:text="${error}">Validation error</p>
	          </div>
	          
	          <div class="w3-container w3-cell">
	             <label for="zemDelka">
	                <span th:text="#{site.longitude}">Longitude</span> *
	             </label>
	             <div th:classappend="${#fields.hasErrors('zemDelka')} ? 'has-error' : ''">
		            <input type="number" step="any"
		                   th:field="*{zemDelka}" 
		                   class="w3-input w3-border w3-round"
		                   th:placeholder="#{site.create.longitude.placeholder}"/>
		         </div>
		         <p class="error-message"
		            th:each="error: ${#fields.errors('zemDelka')}"
		            th:text="${error}">Validation error</p>
	          </div>
	          
          </div>
          
          <div class="w3-cell-row">
	          <div class="w3-container w3-cell">
	            <label for="pristupnostDny">
	               <span th:text="#{site.accessDays}">Accesibility days</span>
	            </label>
	            <div th:classappend="${#fields.hasErrors('pristupnostDny')} ? 'has-error' : ''">
	               <input type="text"
	                      th:field="*{pristupnostDny}"
	                      class="w3-input w3-border w3-round"
	                      th:placeholder="#{site.accessDays.placeholder}" />
	            </div>
	            <p class="error-message"
	               th:each="error: ${#fields.errors('pristupnostDny')}"
	               th:text="${error}">Validation error</p>
	          </div>
	          
	          <div class="w3-container w3-cell">
	            <label for="pristupnostHod">
	               <span th:text="#{site.accessHours}">Accesibility hours</span>
	            </label>
	            <div th:classappend="${#fields.hasErrors('pristupnostHod')} ? 'has-error' : ''">
	               <input type="text"
	                      th:field="*{pristupnostHod}"
	                      class="w3-input w3-border w3-round"
	                      th:placeholder="#{site.accessHours.placeholder}" />
	            </div>
	            <p class="error-message"
	               th:each="error: ${#fields.errors('pristupnostHod')}"
	               th:text="${error}">Validation error</p>
	          </div>
          </div>
          
          <!-- Rozbalovaci menu, vyber jedne polozky ze seznamu -->
          <div class="w3-cell-row w3-margin-top"> <!-- Vsechna rozbalovaci menu v elementu w3-cell-row ? tj. vsechna rozbalovaci menu v jednom radku -->
          
	          <div class="w3-container w3-cell w3-border w3-round">
	            <label class="w3-center" for="typPodniku" th:text="#{site.type}" style="font-weight: bold">Type of podnik</label>
	            <select th:field="*{typPodniku.id}" class="w3-select">
	            <option th:each="siteType : ${allCoffeeSiteTypes}" 
	                    th:value="${siteType.id}"
	                    th:text="${siteType}">Type of podnik</option>
	            </select>
	          </div>
	          
	          <div class="w3-container w3-cell w3-border w3-round">
	            <label class="w3-center" for="statusZarizeni" th:text="#{site.siteStatus}" style="font-weight: bold">Site status</label>
	            <select th:field="*{statusZarizeni.id}" class="w3-select">
	            <option th:each="status : ${allSiteStatuses}" 
	                    th:value="${status.id}"
	                    th:text="${status}">Site status</option>
	            </select>
	          </div>
	          
	          <div class="w3-container w3-cell w3-border w3-round">
	            <label class="w3-center" for="cena" th:text="#{site.pricerange}" style="font-weight: bold">Price range</label>
	            <select th:field="*{cena.id}" class="w3-select">
	            <option th:each="price : ${allPriceRanges}" 
	                    th:value="${price.id}"
	                    th:text="${price}">Price range</option>
	            </select>
	          </div>
	          
	          <div class="w3-container w3-cell w3-border w3-round">
	            <label class="w3-center" for="typLokality" th:text="#{site.locationtype}" style="font-weight: bold">Location type</label>
	            <select th:field="*{typLokality.id}" class="w3-select">
	            <option th:each="locType : ${allLocationTypes}" 
	                    th:value="${locType.id}"
	                    th:text="${locType}">Location type</option>
	            </select>
	          </div>
          
          </div>
          
          <!-- Nekolik checkboxu, vyber vice hodnot -->
          <div class="w3-cell-row w3-margin-top"> <!-- Vsechna Checkbox menu v elementu w3-cell-row ? tj. vsechna rozbalovaci menu v jednom radku -->
	         
	          <div class="w3-container w3-cell w3-border w3-round" th:classappend="${#fields.hasErrors('otherOffers')} ? 'has-error':''">
	            <label class="w3-center" th:text="#{site.otherOffers}" style="font-weight: bold">Other offers</label>
	            <ul>
	              <li th:each="offer : ${allOffers}">
	                <input type="checkbox" class="w3-check"
	                       th:field="*{otherOffers}"
	                       th:value="${offer}" />
	                <label th:for="${offer.id}" th:text="${offer}">Other offers</label>
	              </li>
	            </ul>
	            <p class="error-message"
	                th:each="error: ${#fields.errors('otherOffers')}"
	                th:text="${error}">Validation errors</p>
	          </div>
	          
	          <div  class="w3-container w3-cell w3-border w3-round">
	            <label class="w3-center" th:text="#{site.coffeeSorts}" style="font-weight: bold">Coffee sorts</label>
	            <ul>
	              <li th:each="coffeeSort : ${allCoffeeSorts}">
	                <input type="checkbox" class="w3-check"
	                       th:field="*{coffeeSorts}"
	                       th:value="${coffeeSort}" />
	                <label th:for="${coffeeSort.id}" th:text="${coffeeSort}">Coffee sorts</label>
	              </li>
	            </ul>
	          </div>
	
	          <div  class="w3-container w3-cell w3-border w3-round">
	            <label class="w3-center" th:text="#{site.nextToMachineTypes}" style="font-weight: bold">Next to machine type</label>
	            <ul>
	              <li th:each="ntmt : ${allNextToMachineTypes}">
	                <input type="checkbox" class="w3-check"
	                       th:field="*{nextToMachineTypes}"
	                       th:value="${ntmt}" />
	                <label th:for="${ntmt.id}" th:text="${ntmt}">Next to machine type</label>
	              </li>
	              
	            </ul>
	          </div>
	          
	          <div class="w3-container w3-cell w3-border w3-round">
                 <label class="w3-center" th:text="#{site.cupTypes}" style="font-weight: bold">Cup types</label>
	             <ul>
	               <li th:each="cupType : ${allCupTypes}">
	                  <input type="checkbox" class="w3-check"
	                    	 th:field="*{cupTypes}"
	                	     th:value="${cupType}" />
	                  <label th:for="${cupType.id}" th:text="${cupType}">Cup types</label>
	               </li>
	             </ul>
	          </div>
    		
    		</div>
    		
    		<div class="w3-margin">
            	<label for="hodnoceni">
              		<span th:text="#{site.initialComment}">Initial comment</span>
            	</label>
            	<input type="text" th:field="*{initialComment}" class="w3-input w3-border w3-round" th:errorclass="fieldError" 
            			maxlength=248  th:placeholder="#{site.create.initialcomment.placeholder}"/>
            			<p class="error-message"
	               		   th:each="error: ${#fields.errors('initialComment')}"
	               		   th:text="${error}">Validation error</p>
          	</div>
    
    	  <div class="w3-bar w3-margin-top">
	          <div class="w3-bar-item">
	             <button type="submit" name="save" th:text="(${coffeeSite.id} == 0) ? #{site.button.create} : #{site.button.update}" class="w3-button w3-blue w3-round">Save/Modify Coffee site</button>    
	          </div>
	          
	          <div class="w3-bar-item">
	          	 <a  th:if="${coffeeSite.id} != 0" th:href="@{'/showSite/' + ${coffeeSite.id}}" th:text="#{site.edit.cancel}" class="w3-button">Cancel update site</a>
	          	 <a  th:if="${coffeeSite.id} == 0" th:href="@{'/home'}" th:text="#{site.edit.cancel}" class="w3-button">Cancel creation of the site</a>
		      </div>
		      
		      <div class="w3-bar-item w3-text-gray w3-margin-top w3-right">
		         <label th:text="#{app.items.obligatory}" class="w3-text-gray w3-margin-top w3-small w3-right">Announcement</label>
		      </div>   
		      
          </div>
		       
        </div>
          
      </form>
        
    </div>
    </div> <!-- display-container -->
    
	<!-- <div th:replace="fragments/footer :: footer"/> -->
	
</body>
</html> 